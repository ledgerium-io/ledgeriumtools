version: '3'
services:
  eth-stats:
    image: 'quay.io/amis/ethstats:latest'
    ports:
      - '3000:3000'
    environment:
      - WS_SECRET=bb98a0b6442386d0cdf8a31b267892c1
    restart: always
    networks:
      app_net:
        ipv4_address: 172.16.239.9
  validator-0:
    hostname: validator-0
    image: 'quorumengineering/quorum:latest'
    ports:
      - '21000:21000'
      - '8545:8545'
      - '9000:9000'
    volumes:
      - 'validator-0:/eth'
      - 'constellation-0:/constellation:z'
    depends_on:
      - constellation-0
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - '-c'
      - >-
        if [ -d "/eth/geth" ]; then

        mkdir -p /eth/geth

        echo
        '{"config":{"chainId":2018,"byzantiumBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5b7fa5cb","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f89394f232a4bf183cf17d09bea23e19ceff58ad9dbfed94645cab2686477cd244562d4bd95a75f157a4c05594a79f57a6884a71a25fd17c21549796a53c06737694f7dce95345c5a5917360571165260cf0e8d98918949a56b69d34c023dd99e3ee195d41311d047f19b7948e2a9043ae6866a786f8ed175aa87c0ab9a78c65944f1323a0283663ca0c456a2444b2ac52a6a0a208b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x1FFFFFFFFFFC20","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"0x0000000000000000000000000000000000000020":{"code":"0x606060405236156100c45760e060020a60003504631290948581146100c9578063284d163c146100f957806342169e4814610130578063488099a6146101395780634fe437d514610154578063559c390c1461015d57806368bb8bb61461025d57806372a571fc146102c857806386c1ff681461036957806398ba676d146103a0578063a7771ee31461040b578063adfaa72e14610433578063cf5289851461044e578063de8fa43114610457578063e814d1c71461046d578063f4ab9adf14610494575b610002565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c45760018190555b50565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c4576004546001141561055e57610002565b61045b60025481565b61054a60043560056020526000908152604090205460ff1681565b61045b60015481565b61045b60043560006000600060006000600050600186038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630192505b60018301548110156105d75760018301805484916000918490811015610002576000918252602080832090910154835282810193909352604091820181205485825292869052205410801561023257506001805490840180548591600091859081101561000257906000526020600020900160005054815260208101919091526040016000205410155b156102555760018301805482908110156100025760009182526020909120015491505b6001016101a8565b610548600435602435600160a060020a03331660009081526003602052604081205460ff16156100c4578054839010156105e45780548084038101808355908290829080158290116105df576002028160020283600052602060002091820191016105df919061066b565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c457600160a060020a0381166000908152604090205460ff1615156100f65760406000819020805460ff191660019081179091556004805490910190558051600160a060020a038316815290517f1a4ce6942f7aa91856332e618fc90159f13a340611a308f5d7327ba0707e56859181900360200190a16100f6565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c4576002546001141561071457610002565b61045b600435602435600060006000600050600185038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630181509050806001016000508381548110156100025750825250602090200154919050565b61054a600435600160a060020a03811660009081526003602052604090205460ff165b919050565b61054a60043560036020526000908152604090205460ff1681565b61045b60045481565b6000545b60408051918252519081900360200190f35b61054a600435600160a060020a03811660009081526005602052604090205460ff1661042e565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c457600160a060020a03811660009081526003602052604090205460ff1615156100f65760406000818120600160a060020a0384169182905260036020908152815460ff1916600190811790925560028054909201909155825191825291517f0ad2eca75347acd5160276fe4b5dad46987e4ff4af9e574195e3e9bc15d7e0ff929181900390910190a16100f6565b005b604080519115158252519081900360200190f35b600160a060020a03811660009081526005602052604090205460ff16156100f65760406000819020805460ff19169055600480546000190190558051600160a060020a038316815290517f8cee3054364d6799f1c8962580ad61273d9d38ca1ff26516bd1ad23c099a60229181900360200190a16100f6565b509392505050565b505050505b60008054600019850190811015610002578382526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563016020819052604082205490925014156106b8578060010160005080548060010182818154818355818115116106a5578183600052602060002091820191016106a5919061068d565b50506002015b808211156106a157600181018054600080835591825260208220610665918101905b808211156106a1576000815560010161068d565b5090565b5050506000928352506020909120018290555b600082815260208281526040918290208054600101905581514381529081018490528151600160a060020a033316927f3d03ba7f4b5227cdb385f2610906e5bcee147171603ec40005b30915ad20e258928290030190a2505050565b600160a060020a03811660009081526003602052604090205460ff16156100f65760406000819020805460ff19169055600280546000190190558051600160a060020a038316815290517f183393fc5cffbfc7d03d623966b85f76b9430f42d3aada2ac3f3deabc78899e89181900360200190a16100f656","storage":{"0x0000000000000000000000000000000000000000000000000000000000000001":"0x02","0x0000000000000000000000000000000000000000000000000000000000000002":"0x04","0x29ecdbdf95c7f6ceec92d6150c697aa14abeb0f8595dd58d808842ea237d8494":"0x01","0x6aa118c6537572d8b515a9f9154be55a3377a8de7991cd23bf6e5ceb368688e3":"0x01","0x50793743212c6f01d326957d7069005b912f8215f10c7536be6b10782c6c44cd":"0x01","0x38f6c908c5cc7ca668cec2f476abe61b4dbb1df20f0ad8e07ef5dbf6a2f1ffd4":"0x01","0x0000000000000000000000000000000000000000000000000000000000000004":"0x02","0xaca3b76ed4968740c3180dd7fa37f4aa229a2c758a848f53920e9ccb4c4bb74e":"0x01","0xd188ba2dc293670542c1befaf7678b0859e5354a0727d1188b2afb6f47fe24d1":"0x01"},"balance":"1000000000000000000000000000"},"f232a4bf183cf17d09bea23e19ceff58ad9dbfed":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"645cab2686477cd244562d4bd95a75f157a4c055":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"a79f57a6884a71a25fd17c21549796a53c067376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f7dce95345c5a5917360571165260cf0e8d98918":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a56b69d34c023dd99e3ee195d41311d047f19b7":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"8e2a9043ae6866a786f8ed175aa87c0ab9a78c65":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"4f1323a0283663ca0c456a2444b2ac52a6a0a208":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}'
        > /eth/genesis.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/static-nodes.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/permissioned-nodes.json

        echo 'password' > ./password

        echo '83a5803e698a3642d5309f119643f6a729c7c51fac00fdffac31983cb5275bb5'
        > ./file

        geth account import ./file --datadir /eth --password ./password

        rm ./file && rm ./password

        geth init /eth/genesis.json --datadir /eth

        fi

        geth --rpc --rpcaddr '0.0.0.0' --rpcport '8545' --rpccorsdomain '*'
        --datadir '/eth' --rpcapi
        'db,eth,net,web3,istanbul,personal,admin,debug,txpool' --ws --wsorigins
        '*' --wsport '9000' --wsapi
        'db,eth,net,web3,personal,admin,debug,txpool' --wsaddr '0.0.0.0'
        --networkid 2018 --targetgaslimit 9007199254740000 --permissioned
        --debug --metrics --syncmode 'full' --gasprice 0 --mine --verbosity 3
        --nodiscover --emitcheckpoints --istanbul.blockperiod 1 --mine
        --minerthreads 1 --syncmode full --identity "validator-0" --nodekeyhex
        "83a5803e698a3642d5309f119643f6a729c7c51fac00fdffac31983cb5275bb5"
        --etherbase "f232a4bf183cf17d09bea23e19ceff58ad9dbfed" --port "21000"
    networks:
      app_net:
        ipv4_address: 172.16.239.10
    restart: always
  constellation-0:
    hostname: constellation-0
    image: 'quorumengineering/constellation:latest'
    ports:
      - '10000:10000'
    volumes:
      - 'constellation-0:/constellation:z'
    entrypoint:
      - /bin/sh
      - '-c'
      - >
        if [ -d "constellation" ]; then

        mkdir -p /constellation

        echo
        "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n"
        > /constellation/tm.conf 

        constellation-node --generatekeys=/constellation/tm

        cp /constellation/tm.pub /tmp/tm0.pub

        fi

        constellation-node --socket=/constellation/tm.ipc
        --publickeys=/constellation/tm.pub --privatekeys=/constellation/tm.key
        --storage=/constellation --verbosity=4
        --othernodes=http://172.16.239.101:10001/,http://172.16.239.102:10002/,http://172.16.239.103:10003/
        --url=http://172.16.239.100:10000/ --port=10000
    networks:
      app_net:
        ipv4_address: 172.16.239.100
    restart: always
  validator-1:
    hostname: validator-1
    image: 'quorumengineering/quorum:latest'
    ports:
      - '21001:21000'
      - '8546:8545'
      - '9001:9000'
    volumes:
      - 'validator-1:/eth'
      - 'constellation-1:/constellation:z'
    depends_on:
      - constellation-1
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - '-c'
      - >-
        if [ -d "/eth/geth" ]; then

        mkdir -p /eth/geth

        echo
        '{"config":{"chainId":2018,"byzantiumBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5b7fa5cb","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f89394f232a4bf183cf17d09bea23e19ceff58ad9dbfed94645cab2686477cd244562d4bd95a75f157a4c05594a79f57a6884a71a25fd17c21549796a53c06737694f7dce95345c5a5917360571165260cf0e8d98918949a56b69d34c023dd99e3ee195d41311d047f19b7948e2a9043ae6866a786f8ed175aa87c0ab9a78c65944f1323a0283663ca0c456a2444b2ac52a6a0a208b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x1FFFFFFFFFFC20","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"0x0000000000000000000000000000000000000020":{"code":"0x606060405236156100c45760e060020a60003504631290948581146100c9578063284d163c146100f957806342169e4814610130578063488099a6146101395780634fe437d514610154578063559c390c1461015d57806368bb8bb61461025d57806372a571fc146102c857806386c1ff681461036957806398ba676d146103a0578063a7771ee31461040b578063adfaa72e14610433578063cf5289851461044e578063de8fa43114610457578063e814d1c71461046d578063f4ab9adf14610494575b610002565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c45760018190555b50565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c4576004546001141561055e57610002565b61045b60025481565b61054a60043560056020526000908152604090205460ff1681565b61045b60015481565b61045b60043560006000600060006000600050600186038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630192505b60018301548110156105d75760018301805484916000918490811015610002576000918252602080832090910154835282810193909352604091820181205485825292869052205410801561023257506001805490840180548591600091859081101561000257906000526020600020900160005054815260208101919091526040016000205410155b156102555760018301805482908110156100025760009182526020909120015491505b6001016101a8565b610548600435602435600160a060020a03331660009081526003602052604081205460ff16156100c4578054839010156105e45780548084038101808355908290829080158290116105df576002028160020283600052602060002091820191016105df919061066b565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c457600160a060020a0381166000908152604090205460ff1615156100f65760406000819020805460ff191660019081179091556004805490910190558051600160a060020a038316815290517f1a4ce6942f7aa91856332e618fc90159f13a340611a308f5d7327ba0707e56859181900360200190a16100f6565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c4576002546001141561071457610002565b61045b600435602435600060006000600050600185038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630181509050806001016000508381548110156100025750825250602090200154919050565b61054a600435600160a060020a03811660009081526003602052604090205460ff165b919050565b61054a60043560036020526000908152604090205460ff1681565b61045b60045481565b6000545b60408051918252519081900360200190f35b61054a600435600160a060020a03811660009081526005602052604090205460ff1661042e565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c457600160a060020a03811660009081526003602052604090205460ff1615156100f65760406000818120600160a060020a0384169182905260036020908152815460ff1916600190811790925560028054909201909155825191825291517f0ad2eca75347acd5160276fe4b5dad46987e4ff4af9e574195e3e9bc15d7e0ff929181900390910190a16100f6565b005b604080519115158252519081900360200190f35b600160a060020a03811660009081526005602052604090205460ff16156100f65760406000819020805460ff19169055600480546000190190558051600160a060020a038316815290517f8cee3054364d6799f1c8962580ad61273d9d38ca1ff26516bd1ad23c099a60229181900360200190a16100f6565b509392505050565b505050505b60008054600019850190811015610002578382526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563016020819052604082205490925014156106b8578060010160005080548060010182818154818355818115116106a5578183600052602060002091820191016106a5919061068d565b50506002015b808211156106a157600181018054600080835591825260208220610665918101905b808211156106a1576000815560010161068d565b5090565b5050506000928352506020909120018290555b600082815260208281526040918290208054600101905581514381529081018490528151600160a060020a033316927f3d03ba7f4b5227cdb385f2610906e5bcee147171603ec40005b30915ad20e258928290030190a2505050565b600160a060020a03811660009081526003602052604090205460ff16156100f65760406000819020805460ff19169055600280546000190190558051600160a060020a038316815290517f183393fc5cffbfc7d03d623966b85f76b9430f42d3aada2ac3f3deabc78899e89181900360200190a16100f656","storage":{"0x0000000000000000000000000000000000000000000000000000000000000001":"0x02","0x0000000000000000000000000000000000000000000000000000000000000002":"0x04","0x29ecdbdf95c7f6ceec92d6150c697aa14abeb0f8595dd58d808842ea237d8494":"0x01","0x6aa118c6537572d8b515a9f9154be55a3377a8de7991cd23bf6e5ceb368688e3":"0x01","0x50793743212c6f01d326957d7069005b912f8215f10c7536be6b10782c6c44cd":"0x01","0x38f6c908c5cc7ca668cec2f476abe61b4dbb1df20f0ad8e07ef5dbf6a2f1ffd4":"0x01","0x0000000000000000000000000000000000000000000000000000000000000004":"0x02","0xaca3b76ed4968740c3180dd7fa37f4aa229a2c758a848f53920e9ccb4c4bb74e":"0x01","0xd188ba2dc293670542c1befaf7678b0859e5354a0727d1188b2afb6f47fe24d1":"0x01"},"balance":"1000000000000000000000000000"},"f232a4bf183cf17d09bea23e19ceff58ad9dbfed":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"645cab2686477cd244562d4bd95a75f157a4c055":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"a79f57a6884a71a25fd17c21549796a53c067376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f7dce95345c5a5917360571165260cf0e8d98918":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a56b69d34c023dd99e3ee195d41311d047f19b7":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"8e2a9043ae6866a786f8ed175aa87c0ab9a78c65":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"4f1323a0283663ca0c456a2444b2ac52a6a0a208":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}'
        > /eth/genesis.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/static-nodes.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/permissioned-nodes.json

        echo 'password' > ./password

        echo '9d698949e6ddb9086c34409b16f81c854ef2d7f73e020db7f896ed615efa25b1'
        > ./file

        geth account import ./file --datadir /eth --password ./password

        rm ./file && rm ./password

        geth init /eth/genesis.json --datadir /eth

        fi

        geth --rpc --rpcaddr '0.0.0.0' --rpcport '8545' --rpccorsdomain '*'
        --datadir '/eth' --rpcapi
        'db,eth,net,web3,istanbul,personal,admin,debug,txpool' --ws --wsorigins
        '*' --wsport '9000' --wsapi
        'db,eth,net,web3,personal,admin,debug,txpool' --wsaddr '0.0.0.0'
        --networkid 2018 --targetgaslimit 9007199254740000 --permissioned
        --debug --metrics --syncmode 'full' --gasprice 0 --mine --verbosity 3
        --nodiscover --emitcheckpoints --istanbul.blockperiod 1 --mine
        --minerthreads 1 --syncmode full --identity "validator-1" --nodekeyhex
        "9d698949e6ddb9086c34409b16f81c854ef2d7f73e020db7f896ed615efa25b1"
        --etherbase "645cab2686477cd244562d4bd95a75f157a4c055" --port "21000"
    networks:
      app_net:
        ipv4_address: 172.16.239.11
    restart: always
  constellation-1:
    hostname: constellation-1
    image: 'quorumengineering/constellation:latest'
    ports:
      - '10001:10001'
    volumes:
      - 'constellation-1:/constellation:z'
    entrypoint:
      - /bin/sh
      - '-c'
      - >
        if [ -d "constellation" ]; then

        mkdir -p /constellation

        echo
        "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n"
        > /constellation/tm.conf 

        constellation-node --generatekeys=/constellation/tm

        cp /constellation/tm.pub /tmp/tm1.pub

        fi

        constellation-node --socket=/constellation/tm.ipc
        --publickeys=/constellation/tm.pub --privatekeys=/constellation/tm.key
        --storage=/constellation --verbosity=4
        --othernodes=http://172.16.239.100:10000/,http://172.16.239.102:10002/,http://172.16.239.103:10003/
        --url=http://172.16.239.101:10001/ --port=10001
    networks:
      app_net:
        ipv4_address: 172.16.239.101
    restart: always
  validator-2:
    hostname: validator-2
    image: 'quorumengineering/quorum:latest'
    ports:
      - '21002:21000'
      - '8547:8545'
      - '9002:9000'
    volumes:
      - 'validator-2:/eth'
      - 'constellation-2:/constellation:z'
    depends_on:
      - constellation-2
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - '-c'
      - >-
        if [ -d "/eth/geth" ]; then

        mkdir -p /eth/geth

        echo
        '{"config":{"chainId":2018,"byzantiumBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5b7fa5cb","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f89394f232a4bf183cf17d09bea23e19ceff58ad9dbfed94645cab2686477cd244562d4bd95a75f157a4c05594a79f57a6884a71a25fd17c21549796a53c06737694f7dce95345c5a5917360571165260cf0e8d98918949a56b69d34c023dd99e3ee195d41311d047f19b7948e2a9043ae6866a786f8ed175aa87c0ab9a78c65944f1323a0283663ca0c456a2444b2ac52a6a0a208b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x1FFFFFFFFFFC20","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"0x0000000000000000000000000000000000000020":{"code":"0x606060405236156100c45760e060020a60003504631290948581146100c9578063284d163c146100f957806342169e4814610130578063488099a6146101395780634fe437d514610154578063559c390c1461015d57806368bb8bb61461025d57806372a571fc146102c857806386c1ff681461036957806398ba676d146103a0578063a7771ee31461040b578063adfaa72e14610433578063cf5289851461044e578063de8fa43114610457578063e814d1c71461046d578063f4ab9adf14610494575b610002565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c45760018190555b50565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c4576004546001141561055e57610002565b61045b60025481565b61054a60043560056020526000908152604090205460ff1681565b61045b60015481565b61045b60043560006000600060006000600050600186038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630192505b60018301548110156105d75760018301805484916000918490811015610002576000918252602080832090910154835282810193909352604091820181205485825292869052205410801561023257506001805490840180548591600091859081101561000257906000526020600020900160005054815260208101919091526040016000205410155b156102555760018301805482908110156100025760009182526020909120015491505b6001016101a8565b610548600435602435600160a060020a03331660009081526003602052604081205460ff16156100c4578054839010156105e45780548084038101808355908290829080158290116105df576002028160020283600052602060002091820191016105df919061066b565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c457600160a060020a0381166000908152604090205460ff1615156100f65760406000819020805460ff191660019081179091556004805490910190558051600160a060020a038316815290517f1a4ce6942f7aa91856332e618fc90159f13a340611a308f5d7327ba0707e56859181900360200190a16100f6565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c4576002546001141561071457610002565b61045b600435602435600060006000600050600185038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630181509050806001016000508381548110156100025750825250602090200154919050565b61054a600435600160a060020a03811660009081526003602052604090205460ff165b919050565b61054a60043560036020526000908152604090205460ff1681565b61045b60045481565b6000545b60408051918252519081900360200190f35b61054a600435600160a060020a03811660009081526005602052604090205460ff1661042e565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c457600160a060020a03811660009081526003602052604090205460ff1615156100f65760406000818120600160a060020a0384169182905260036020908152815460ff1916600190811790925560028054909201909155825191825291517f0ad2eca75347acd5160276fe4b5dad46987e4ff4af9e574195e3e9bc15d7e0ff929181900390910190a16100f6565b005b604080519115158252519081900360200190f35b600160a060020a03811660009081526005602052604090205460ff16156100f65760406000819020805460ff19169055600480546000190190558051600160a060020a038316815290517f8cee3054364d6799f1c8962580ad61273d9d38ca1ff26516bd1ad23c099a60229181900360200190a16100f6565b509392505050565b505050505b60008054600019850190811015610002578382526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563016020819052604082205490925014156106b8578060010160005080548060010182818154818355818115116106a5578183600052602060002091820191016106a5919061068d565b50506002015b808211156106a157600181018054600080835591825260208220610665918101905b808211156106a1576000815560010161068d565b5090565b5050506000928352506020909120018290555b600082815260208281526040918290208054600101905581514381529081018490528151600160a060020a033316927f3d03ba7f4b5227cdb385f2610906e5bcee147171603ec40005b30915ad20e258928290030190a2505050565b600160a060020a03811660009081526003602052604090205460ff16156100f65760406000819020805460ff19169055600280546000190190558051600160a060020a038316815290517f183393fc5cffbfc7d03d623966b85f76b9430f42d3aada2ac3f3deabc78899e89181900360200190a16100f656","storage":{"0x0000000000000000000000000000000000000000000000000000000000000001":"0x02","0x0000000000000000000000000000000000000000000000000000000000000002":"0x04","0x29ecdbdf95c7f6ceec92d6150c697aa14abeb0f8595dd58d808842ea237d8494":"0x01","0x6aa118c6537572d8b515a9f9154be55a3377a8de7991cd23bf6e5ceb368688e3":"0x01","0x50793743212c6f01d326957d7069005b912f8215f10c7536be6b10782c6c44cd":"0x01","0x38f6c908c5cc7ca668cec2f476abe61b4dbb1df20f0ad8e07ef5dbf6a2f1ffd4":"0x01","0x0000000000000000000000000000000000000000000000000000000000000004":"0x02","0xaca3b76ed4968740c3180dd7fa37f4aa229a2c758a848f53920e9ccb4c4bb74e":"0x01","0xd188ba2dc293670542c1befaf7678b0859e5354a0727d1188b2afb6f47fe24d1":"0x01"},"balance":"1000000000000000000000000000"},"f232a4bf183cf17d09bea23e19ceff58ad9dbfed":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"645cab2686477cd244562d4bd95a75f157a4c055":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"a79f57a6884a71a25fd17c21549796a53c067376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f7dce95345c5a5917360571165260cf0e8d98918":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a56b69d34c023dd99e3ee195d41311d047f19b7":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"8e2a9043ae6866a786f8ed175aa87c0ab9a78c65":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"4f1323a0283663ca0c456a2444b2ac52a6a0a208":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}'
        > /eth/genesis.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/static-nodes.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/permissioned-nodes.json

        echo 'password' > ./password

        echo '02a121dc9a44f48c3630210f6643eeb148f6c418908788457f6b72892f9f3516'
        > ./file

        geth account import ./file --datadir /eth --password ./password

        rm ./file && rm ./password

        geth init /eth/genesis.json --datadir /eth

        fi

        geth --rpc --rpcaddr '0.0.0.0' --rpcport '8545' --rpccorsdomain '*'
        --datadir '/eth' --rpcapi
        'db,eth,net,web3,istanbul,personal,admin,debug,txpool' --ws --wsorigins
        '*' --wsport '9000' --wsapi
        'db,eth,net,web3,personal,admin,debug,txpool' --wsaddr '0.0.0.0'
        --networkid 2018 --targetgaslimit 9007199254740000 --permissioned
        --debug --metrics --syncmode 'full' --gasprice 0 --mine --verbosity 3
        --nodiscover --emitcheckpoints --istanbul.blockperiod 1 --mine
        --minerthreads 1 --syncmode full --identity "validator-2" --nodekeyhex
        "02a121dc9a44f48c3630210f6643eeb148f6c418908788457f6b72892f9f3516"
        --etherbase "a79f57a6884a71a25fd17c21549796a53c067376" --port "21000"
    networks:
      app_net:
        ipv4_address: 172.16.239.12
    restart: always
  constellation-2:
    hostname: constellation-2
    image: 'quorumengineering/constellation:latest'
    ports:
      - '10002:10002'
    volumes:
      - 'constellation-2:/constellation:z'
    entrypoint:
      - /bin/sh
      - '-c'
      - >
        if [ -d "constellation" ]; then

        mkdir -p /constellation

        echo
        "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n"
        > /constellation/tm.conf 

        constellation-node --generatekeys=/constellation/tm

        cp /constellation/tm.pub /tmp/tm2.pub

        fi

        constellation-node --socket=/constellation/tm.ipc
        --publickeys=/constellation/tm.pub --privatekeys=/constellation/tm.key
        --storage=/constellation --verbosity=4
        --othernodes=http://172.16.239.100:10000/,http://172.16.239.101:10001/,http://172.16.239.103:10003/
        --url=http://172.16.239.102:10002/ --port=10002
    networks:
      app_net:
        ipv4_address: 172.16.239.102
    restart: always
  validator-3:
    hostname: validator-3
    image: 'quorumengineering/quorum:latest'
    ports:
      - '21003:21000'
      - '8548:8545'
      - '9003:9000'
    volumes:
      - 'validator-3:/eth'
      - 'constellation-3:/constellation:z'
    depends_on:
      - constellation-3
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - '-c'
      - >-
        if [ -d "/eth/geth" ]; then

        mkdir -p /eth/geth

        echo
        '{"config":{"chainId":2018,"byzantiumBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5b7fa5cb","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f89394f232a4bf183cf17d09bea23e19ceff58ad9dbfed94645cab2686477cd244562d4bd95a75f157a4c05594a79f57a6884a71a25fd17c21549796a53c06737694f7dce95345c5a5917360571165260cf0e8d98918949a56b69d34c023dd99e3ee195d41311d047f19b7948e2a9043ae6866a786f8ed175aa87c0ab9a78c65944f1323a0283663ca0c456a2444b2ac52a6a0a208b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x1FFFFFFFFFFC20","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"0x0000000000000000000000000000000000000020":{"code":"0x606060405236156100c45760e060020a60003504631290948581146100c9578063284d163c146100f957806342169e4814610130578063488099a6146101395780634fe437d514610154578063559c390c1461015d57806368bb8bb61461025d57806372a571fc146102c857806386c1ff681461036957806398ba676d146103a0578063a7771ee31461040b578063adfaa72e14610433578063cf5289851461044e578063de8fa43114610457578063e814d1c71461046d578063f4ab9adf14610494575b610002565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c45760018190555b50565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c4576004546001141561055e57610002565b61045b60025481565b61054a60043560056020526000908152604090205460ff1681565b61045b60015481565b61045b60043560006000600060006000600050600186038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630192505b60018301548110156105d75760018301805484916000918490811015610002576000918252602080832090910154835282810193909352604091820181205485825292869052205410801561023257506001805490840180548591600091859081101561000257906000526020600020900160005054815260208101919091526040016000205410155b156102555760018301805482908110156100025760009182526020909120015491505b6001016101a8565b610548600435602435600160a060020a03331660009081526003602052604081205460ff16156100c4578054839010156105e45780548084038101808355908290829080158290116105df576002028160020283600052602060002091820191016105df919061066b565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c457600160a060020a0381166000908152604090205460ff1615156100f65760406000819020805460ff191660019081179091556004805490910190558051600160a060020a038316815290517f1a4ce6942f7aa91856332e618fc90159f13a340611a308f5d7327ba0707e56859181900360200190a16100f6565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c4576002546001141561071457610002565b61045b600435602435600060006000600050600185038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630181509050806001016000508381548110156100025750825250602090200154919050565b61054a600435600160a060020a03811660009081526003602052604090205460ff165b919050565b61054a60043560036020526000908152604090205460ff1681565b61045b60045481565b6000545b60408051918252519081900360200190f35b61054a600435600160a060020a03811660009081526005602052604090205460ff1661042e565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c457600160a060020a03811660009081526003602052604090205460ff1615156100f65760406000818120600160a060020a0384169182905260036020908152815460ff1916600190811790925560028054909201909155825191825291517f0ad2eca75347acd5160276fe4b5dad46987e4ff4af9e574195e3e9bc15d7e0ff929181900390910190a16100f6565b005b604080519115158252519081900360200190f35b600160a060020a03811660009081526005602052604090205460ff16156100f65760406000819020805460ff19169055600480546000190190558051600160a060020a038316815290517f8cee3054364d6799f1c8962580ad61273d9d38ca1ff26516bd1ad23c099a60229181900360200190a16100f6565b509392505050565b505050505b60008054600019850190811015610002578382526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563016020819052604082205490925014156106b8578060010160005080548060010182818154818355818115116106a5578183600052602060002091820191016106a5919061068d565b50506002015b808211156106a157600181018054600080835591825260208220610665918101905b808211156106a1576000815560010161068d565b5090565b5050506000928352506020909120018290555b600082815260208281526040918290208054600101905581514381529081018490528151600160a060020a033316927f3d03ba7f4b5227cdb385f2610906e5bcee147171603ec40005b30915ad20e258928290030190a2505050565b600160a060020a03811660009081526003602052604090205460ff16156100f65760406000819020805460ff19169055600280546000190190558051600160a060020a038316815290517f183393fc5cffbfc7d03d623966b85f76b9430f42d3aada2ac3f3deabc78899e89181900360200190a16100f656","storage":{"0x0000000000000000000000000000000000000000000000000000000000000001":"0x02","0x0000000000000000000000000000000000000000000000000000000000000002":"0x04","0x29ecdbdf95c7f6ceec92d6150c697aa14abeb0f8595dd58d808842ea237d8494":"0x01","0x6aa118c6537572d8b515a9f9154be55a3377a8de7991cd23bf6e5ceb368688e3":"0x01","0x50793743212c6f01d326957d7069005b912f8215f10c7536be6b10782c6c44cd":"0x01","0x38f6c908c5cc7ca668cec2f476abe61b4dbb1df20f0ad8e07ef5dbf6a2f1ffd4":"0x01","0x0000000000000000000000000000000000000000000000000000000000000004":"0x02","0xaca3b76ed4968740c3180dd7fa37f4aa229a2c758a848f53920e9ccb4c4bb74e":"0x01","0xd188ba2dc293670542c1befaf7678b0859e5354a0727d1188b2afb6f47fe24d1":"0x01"},"balance":"1000000000000000000000000000"},"f232a4bf183cf17d09bea23e19ceff58ad9dbfed":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"645cab2686477cd244562d4bd95a75f157a4c055":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"a79f57a6884a71a25fd17c21549796a53c067376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f7dce95345c5a5917360571165260cf0e8d98918":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a56b69d34c023dd99e3ee195d41311d047f19b7":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"8e2a9043ae6866a786f8ed175aa87c0ab9a78c65":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"4f1323a0283663ca0c456a2444b2ac52a6a0a208":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}'
        > /eth/genesis.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/static-nodes.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/permissioned-nodes.json

        echo 'password' > ./password

        echo 'bf96d1aabb87c249ef8c85f98476b11e114e0bc6e62a11582d376ece941ecf09'
        > ./file

        geth account import ./file --datadir /eth --password ./password

        rm ./file && rm ./password

        geth init /eth/genesis.json --datadir /eth

        fi

        geth --rpc --rpcaddr '0.0.0.0' --rpcport '8545' --rpccorsdomain '*'
        --datadir '/eth' --rpcapi
        'db,eth,net,web3,istanbul,personal,admin,debug,txpool' --ws --wsorigins
        '*' --wsport '9000' --wsapi
        'db,eth,net,web3,personal,admin,debug,txpool' --wsaddr '0.0.0.0'
        --networkid 2018 --targetgaslimit 9007199254740000 --permissioned
        --debug --metrics --syncmode 'full' --gasprice 0 --mine --verbosity 3
        --nodiscover --emitcheckpoints --istanbul.blockperiod 1 --mine
        --minerthreads 1 --syncmode full --identity "validator-3" --nodekeyhex
        "bf96d1aabb87c249ef8c85f98476b11e114e0bc6e62a11582d376ece941ecf09"
        --etherbase "f7dce95345c5a5917360571165260cf0e8d98918" --port "21000"
    networks:
      app_net:
        ipv4_address: 172.16.239.13
    restart: always
  constellation-3:
    hostname: constellation-3
    image: 'quorumengineering/constellation:latest'
    ports:
      - '10003:10003'
    volumes:
      - 'constellation-3:/constellation:z'
    entrypoint:
      - /bin/sh
      - '-c'
      - >
        if [ -d "constellation" ]; then

        mkdir -p /constellation

        echo
        "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n"
        > /constellation/tm.conf 

        constellation-node --generatekeys=/constellation/tm

        cp /constellation/tm.pub /tmp/tm3.pub

        fi

        constellation-node --socket=/constellation/tm.ipc
        --publickeys=/constellation/tm.pub --privatekeys=/constellation/tm.key
        --storage=/constellation --verbosity=4
        --othernodes=http://172.16.239.100:10000/,http://172.16.239.101:10001/,http://172.16.239.102:10002/
        --url=http://172.16.239.103:10003/ --port=10003
    networks:
      app_net:
        ipv4_address: 172.16.239.103
    restart: always
  validator-4:
    hostname: validator-4
    image: 'quorumengineering/quorum:latest'
    ports:
      - '21004:21000'
      - '8549:8545'
      - '9004:9000'
    volumes:
      - 'validator-4:/eth'
      - 'constellation-4:/constellation:z'
    depends_on:
      - constellation-4
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - '-c'
      - >-
        if [ -d "/eth/geth" ]; then

        mkdir -p /eth/geth

        echo
        '{"config":{"chainId":2018,"byzantiumBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5b7fa5cb","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f89394f232a4bf183cf17d09bea23e19ceff58ad9dbfed94645cab2686477cd244562d4bd95a75f157a4c05594a79f57a6884a71a25fd17c21549796a53c06737694f7dce95345c5a5917360571165260cf0e8d98918949a56b69d34c023dd99e3ee195d41311d047f19b7948e2a9043ae6866a786f8ed175aa87c0ab9a78c65944f1323a0283663ca0c456a2444b2ac52a6a0a208b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x1FFFFFFFFFFC20","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"0x0000000000000000000000000000000000000020":{"code":"0x606060405236156100c45760e060020a60003504631290948581146100c9578063284d163c146100f957806342169e4814610130578063488099a6146101395780634fe437d514610154578063559c390c1461015d57806368bb8bb61461025d57806372a571fc146102c857806386c1ff681461036957806398ba676d146103a0578063a7771ee31461040b578063adfaa72e14610433578063cf5289851461044e578063de8fa43114610457578063e814d1c71461046d578063f4ab9adf14610494575b610002565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c45760018190555b50565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c4576004546001141561055e57610002565b61045b60025481565b61054a60043560056020526000908152604090205460ff1681565b61045b60015481565b61045b60043560006000600060006000600050600186038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630192505b60018301548110156105d75760018301805484916000918490811015610002576000918252602080832090910154835282810193909352604091820181205485825292869052205410801561023257506001805490840180548591600091859081101561000257906000526020600020900160005054815260208101919091526040016000205410155b156102555760018301805482908110156100025760009182526020909120015491505b6001016101a8565b610548600435602435600160a060020a03331660009081526003602052604081205460ff16156100c4578054839010156105e45780548084038101808355908290829080158290116105df576002028160020283600052602060002091820191016105df919061066b565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c457600160a060020a0381166000908152604090205460ff1615156100f65760406000819020805460ff191660019081179091556004805490910190558051600160a060020a038316815290517f1a4ce6942f7aa91856332e618fc90159f13a340611a308f5d7327ba0707e56859181900360200190a16100f6565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c4576002546001141561071457610002565b61045b600435602435600060006000600050600185038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630181509050806001016000508381548110156100025750825250602090200154919050565b61054a600435600160a060020a03811660009081526003602052604090205460ff165b919050565b61054a60043560036020526000908152604090205460ff1681565b61045b60045481565b6000545b60408051918252519081900360200190f35b61054a600435600160a060020a03811660009081526005602052604090205460ff1661042e565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c457600160a060020a03811660009081526003602052604090205460ff1615156100f65760406000818120600160a060020a0384169182905260036020908152815460ff1916600190811790925560028054909201909155825191825291517f0ad2eca75347acd5160276fe4b5dad46987e4ff4af9e574195e3e9bc15d7e0ff929181900390910190a16100f6565b005b604080519115158252519081900360200190f35b600160a060020a03811660009081526005602052604090205460ff16156100f65760406000819020805460ff19169055600480546000190190558051600160a060020a038316815290517f8cee3054364d6799f1c8962580ad61273d9d38ca1ff26516bd1ad23c099a60229181900360200190a16100f6565b509392505050565b505050505b60008054600019850190811015610002578382526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563016020819052604082205490925014156106b8578060010160005080548060010182818154818355818115116106a5578183600052602060002091820191016106a5919061068d565b50506002015b808211156106a157600181018054600080835591825260208220610665918101905b808211156106a1576000815560010161068d565b5090565b5050506000928352506020909120018290555b600082815260208281526040918290208054600101905581514381529081018490528151600160a060020a033316927f3d03ba7f4b5227cdb385f2610906e5bcee147171603ec40005b30915ad20e258928290030190a2505050565b600160a060020a03811660009081526003602052604090205460ff16156100f65760406000819020805460ff19169055600280546000190190558051600160a060020a038316815290517f183393fc5cffbfc7d03d623966b85f76b9430f42d3aada2ac3f3deabc78899e89181900360200190a16100f656","storage":{"0x0000000000000000000000000000000000000000000000000000000000000001":"0x02","0x0000000000000000000000000000000000000000000000000000000000000002":"0x04","0x29ecdbdf95c7f6ceec92d6150c697aa14abeb0f8595dd58d808842ea237d8494":"0x01","0x6aa118c6537572d8b515a9f9154be55a3377a8de7991cd23bf6e5ceb368688e3":"0x01","0x50793743212c6f01d326957d7069005b912f8215f10c7536be6b10782c6c44cd":"0x01","0x38f6c908c5cc7ca668cec2f476abe61b4dbb1df20f0ad8e07ef5dbf6a2f1ffd4":"0x01","0x0000000000000000000000000000000000000000000000000000000000000004":"0x02","0xaca3b76ed4968740c3180dd7fa37f4aa229a2c758a848f53920e9ccb4c4bb74e":"0x01","0xd188ba2dc293670542c1befaf7678b0859e5354a0727d1188b2afb6f47fe24d1":"0x01"},"balance":"1000000000000000000000000000"},"f232a4bf183cf17d09bea23e19ceff58ad9dbfed":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"645cab2686477cd244562d4bd95a75f157a4c055":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"a79f57a6884a71a25fd17c21549796a53c067376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f7dce95345c5a5917360571165260cf0e8d98918":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a56b69d34c023dd99e3ee195d41311d047f19b7":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"8e2a9043ae6866a786f8ed175aa87c0ab9a78c65":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"4f1323a0283663ca0c456a2444b2ac52a6a0a208":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}'
        > /eth/genesis.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/static-nodes.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/permissioned-nodes.json

        echo 'password' > ./password

        echo '59b4a7f6292139cedf83be50a85438d3354245e7d1d6820e5ade1c1ee31f3e68'
        > ./file

        geth account import ./file --datadir /eth --password ./password

        rm ./file && rm ./password

        geth init /eth/genesis.json --datadir /eth

        fi

        geth --rpc --rpcaddr '0.0.0.0' --rpcport '8545' --rpccorsdomain '*'
        --datadir '/eth' --rpcapi
        'db,eth,net,web3,istanbul,personal,admin,debug,txpool' --ws --wsorigins
        '*' --wsport '9000' --wsapi
        'db,eth,net,web3,personal,admin,debug,txpool' --wsaddr '0.0.0.0'
        --networkid 2018 --targetgaslimit 9007199254740000 --permissioned
        --debug --metrics --syncmode 'full' --gasprice 0 --mine --verbosity 3
        --nodiscover --emitcheckpoints --istanbul.blockperiod 1 --mine
        --minerthreads 1 --syncmode full --identity "validator-4" --nodekeyhex
        "59b4a7f6292139cedf83be50a85438d3354245e7d1d6820e5ade1c1ee31f3e68"
        --etherbase "9a56b69d34c023dd99e3ee195d41311d047f19b7" --port "21000"
    networks:
      app_net:
        ipv4_address: 172.16.239.14
    restart: always
  constellation-4:
    hostname: constellation-4
    image: 'quorumengineering/constellation:latest'
    ports:
      - '10004:10004'
    volumes:
      - 'constellation-4:/constellation:z'
    entrypoint:
      - /bin/sh
      - '-c'
      - >
        if [ -d "constellation" ]; then

        mkdir -p /constellation

        echo
        "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n"
        > /constellation/tm.conf 

        constellation-node --generatekeys=/constellation/tm

        cp /constellation/tm.pub /tmp/tm4.pub

        fi

        constellation-node --socket=/constellation/tm.ipc
        --publickeys=/constellation/tm.pub --privatekeys=/constellation/tm.key
        --storage=/constellation --verbosity=4
        --othernodes=http://172.16.239.100:10000/,http://172.16.239.101:10001/,http://172.16.239.102:10002/
        --url=http://172.16.239.104:10004/ --port=10004
    networks:
      app_net:
        ipv4_address: 172.16.239.104
    restart: always
  validator-5:
    hostname: validator-5
    image: 'quorumengineering/quorum:latest'
    ports:
      - '21005:21000'
      - '8550:8545'
      - '9005:9000'
    volumes:
      - 'validator-5:/eth'
      - 'constellation-5:/constellation:z'
    depends_on:
      - constellation-5
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - '-c'
      - >-
        if [ -d "/eth/geth" ]; then

        mkdir -p /eth/geth

        echo
        '{"config":{"chainId":2018,"byzantiumBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5b7fa5cb","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f89394f232a4bf183cf17d09bea23e19ceff58ad9dbfed94645cab2686477cd244562d4bd95a75f157a4c05594a79f57a6884a71a25fd17c21549796a53c06737694f7dce95345c5a5917360571165260cf0e8d98918949a56b69d34c023dd99e3ee195d41311d047f19b7948e2a9043ae6866a786f8ed175aa87c0ab9a78c65944f1323a0283663ca0c456a2444b2ac52a6a0a208b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x1FFFFFFFFFFC20","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"0x0000000000000000000000000000000000000020":{"code":"0x606060405236156100c45760e060020a60003504631290948581146100c9578063284d163c146100f957806342169e4814610130578063488099a6146101395780634fe437d514610154578063559c390c1461015d57806368bb8bb61461025d57806372a571fc146102c857806386c1ff681461036957806398ba676d146103a0578063a7771ee31461040b578063adfaa72e14610433578063cf5289851461044e578063de8fa43114610457578063e814d1c71461046d578063f4ab9adf14610494575b610002565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c45760018190555b50565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c4576004546001141561055e57610002565b61045b60025481565b61054a60043560056020526000908152604090205460ff1681565b61045b60015481565b61045b60043560006000600060006000600050600186038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630192505b60018301548110156105d75760018301805484916000918490811015610002576000918252602080832090910154835282810193909352604091820181205485825292869052205410801561023257506001805490840180548591600091859081101561000257906000526020600020900160005054815260208101919091526040016000205410155b156102555760018301805482908110156100025760009182526020909120015491505b6001016101a8565b610548600435602435600160a060020a03331660009081526003602052604081205460ff16156100c4578054839010156105e45780548084038101808355908290829080158290116105df576002028160020283600052602060002091820191016105df919061066b565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c457600160a060020a0381166000908152604090205460ff1615156100f65760406000819020805460ff191660019081179091556004805490910190558051600160a060020a038316815290517f1a4ce6942f7aa91856332e618fc90159f13a340611a308f5d7327ba0707e56859181900360200190a16100f6565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c4576002546001141561071457610002565b61045b600435602435600060006000600050600185038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630181509050806001016000508381548110156100025750825250602090200154919050565b61054a600435600160a060020a03811660009081526003602052604090205460ff165b919050565b61054a60043560036020526000908152604090205460ff1681565b61045b60045481565b6000545b60408051918252519081900360200190f35b61054a600435600160a060020a03811660009081526005602052604090205460ff1661042e565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c457600160a060020a03811660009081526003602052604090205460ff1615156100f65760406000818120600160a060020a0384169182905260036020908152815460ff1916600190811790925560028054909201909155825191825291517f0ad2eca75347acd5160276fe4b5dad46987e4ff4af9e574195e3e9bc15d7e0ff929181900390910190a16100f6565b005b604080519115158252519081900360200190f35b600160a060020a03811660009081526005602052604090205460ff16156100f65760406000819020805460ff19169055600480546000190190558051600160a060020a038316815290517f8cee3054364d6799f1c8962580ad61273d9d38ca1ff26516bd1ad23c099a60229181900360200190a16100f6565b509392505050565b505050505b60008054600019850190811015610002578382526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563016020819052604082205490925014156106b8578060010160005080548060010182818154818355818115116106a5578183600052602060002091820191016106a5919061068d565b50506002015b808211156106a157600181018054600080835591825260208220610665918101905b808211156106a1576000815560010161068d565b5090565b5050506000928352506020909120018290555b600082815260208281526040918290208054600101905581514381529081018490528151600160a060020a033316927f3d03ba7f4b5227cdb385f2610906e5bcee147171603ec40005b30915ad20e258928290030190a2505050565b600160a060020a03811660009081526003602052604090205460ff16156100f65760406000819020805460ff19169055600280546000190190558051600160a060020a038316815290517f183393fc5cffbfc7d03d623966b85f76b9430f42d3aada2ac3f3deabc78899e89181900360200190a16100f656","storage":{"0x0000000000000000000000000000000000000000000000000000000000000001":"0x02","0x0000000000000000000000000000000000000000000000000000000000000002":"0x04","0x29ecdbdf95c7f6ceec92d6150c697aa14abeb0f8595dd58d808842ea237d8494":"0x01","0x6aa118c6537572d8b515a9f9154be55a3377a8de7991cd23bf6e5ceb368688e3":"0x01","0x50793743212c6f01d326957d7069005b912f8215f10c7536be6b10782c6c44cd":"0x01","0x38f6c908c5cc7ca668cec2f476abe61b4dbb1df20f0ad8e07ef5dbf6a2f1ffd4":"0x01","0x0000000000000000000000000000000000000000000000000000000000000004":"0x02","0xaca3b76ed4968740c3180dd7fa37f4aa229a2c758a848f53920e9ccb4c4bb74e":"0x01","0xd188ba2dc293670542c1befaf7678b0859e5354a0727d1188b2afb6f47fe24d1":"0x01"},"balance":"1000000000000000000000000000"},"f232a4bf183cf17d09bea23e19ceff58ad9dbfed":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"645cab2686477cd244562d4bd95a75f157a4c055":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"a79f57a6884a71a25fd17c21549796a53c067376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f7dce95345c5a5917360571165260cf0e8d98918":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a56b69d34c023dd99e3ee195d41311d047f19b7":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"8e2a9043ae6866a786f8ed175aa87c0ab9a78c65":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"4f1323a0283663ca0c456a2444b2ac52a6a0a208":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}'
        > /eth/genesis.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/static-nodes.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/permissioned-nodes.json

        echo 'password' > ./password

        echo '8ac5af2ef95a09fe78da92acd69c1e9e141c87da8515067f533c207010010e1e'
        > ./file

        geth account import ./file --datadir /eth --password ./password

        rm ./file && rm ./password

        geth init /eth/genesis.json --datadir /eth

        fi

        geth --rpc --rpcaddr '0.0.0.0' --rpcport '8545' --rpccorsdomain '*'
        --datadir '/eth' --rpcapi
        'db,eth,net,web3,istanbul,personal,admin,debug,txpool' --ws --wsorigins
        '*' --wsport '9000' --wsapi
        'db,eth,net,web3,personal,admin,debug,txpool' --wsaddr '0.0.0.0'
        --networkid 2018 --targetgaslimit 9007199254740000 --permissioned
        --debug --metrics --syncmode 'full' --gasprice 0 --mine --verbosity 3
        --nodiscover --emitcheckpoints --istanbul.blockperiod 1 --mine
        --minerthreads 1 --syncmode full --identity "validator-5" --nodekeyhex
        "8ac5af2ef95a09fe78da92acd69c1e9e141c87da8515067f533c207010010e1e"
        --etherbase "8e2a9043ae6866a786f8ed175aa87c0ab9a78c65" --port "21000"
    networks:
      app_net:
        ipv4_address: 172.16.239.15
    restart: always
  constellation-5:
    hostname: constellation-5
    image: 'quorumengineering/constellation:latest'
    ports:
      - '10005:10005'
    volumes:
      - 'constellation-5:/constellation:z'
    entrypoint:
      - /bin/sh
      - '-c'
      - >
        if [ -d "constellation" ]; then

        mkdir -p /constellation

        echo
        "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n"
        > /constellation/tm.conf 

        constellation-node --generatekeys=/constellation/tm

        cp /constellation/tm.pub /tmp/tm5.pub

        fi

        constellation-node --socket=/constellation/tm.ipc
        --publickeys=/constellation/tm.pub --privatekeys=/constellation/tm.key
        --storage=/constellation --verbosity=4
        --othernodes=http://172.16.239.100:10000/,http://172.16.239.101:10001/,http://172.16.239.102:10002/
        --url=http://172.16.239.105:10005/ --port=10005
    networks:
      app_net:
        ipv4_address: 172.16.239.105
    restart: always
  validator-6:
    hostname: validator-6
    image: 'quorumengineering/quorum:latest'
    ports:
      - '21006:21000'
      - '8551:8545'
      - '9006:9000'
    volumes:
      - 'validator-6:/eth'
      - 'constellation-6:/constellation:z'
    depends_on:
      - constellation-6
    environment:
      - PRIVATE_CONFIG=/constellation/tm.conf
    entrypoint:
      - /bin/sh
      - '-c'
      - >-
        if [ -d "/eth/geth" ]; then

        mkdir -p /eth/geth

        echo
        '{"config":{"chainId":2018,"byzantiumBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":0,"eip158Block":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5b7fa5cb","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f89394f232a4bf183cf17d09bea23e19ceff58ad9dbfed94645cab2686477cd244562d4bd95a75f157a4c05594a79f57a6884a71a25fd17c21549796a53c06737694f7dce95345c5a5917360571165260cf0e8d98918949a56b69d34c023dd99e3ee195d41311d047f19b7948e2a9043ae6866a786f8ed175aa87c0ab9a78c65944f1323a0283663ca0c456a2444b2ac52a6a0a208b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x1FFFFFFFFFFC20","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","alloc":{"0x0000000000000000000000000000000000000020":{"code":"0x606060405236156100c45760e060020a60003504631290948581146100c9578063284d163c146100f957806342169e4814610130578063488099a6146101395780634fe437d514610154578063559c390c1461015d57806368bb8bb61461025d57806372a571fc146102c857806386c1ff681461036957806398ba676d146103a0578063a7771ee31461040b578063adfaa72e14610433578063cf5289851461044e578063de8fa43114610457578063e814d1c71461046d578063f4ab9adf14610494575b610002565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c45760018190555b50565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c4576004546001141561055e57610002565b61045b60025481565b61054a60043560056020526000908152604090205460ff1681565b61045b60015481565b61045b60043560006000600060006000600050600186038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630192505b60018301548110156105d75760018301805484916000918490811015610002576000918252602080832090910154835282810193909352604091820181205485825292869052205410801561023257506001805490840180548591600091859081101561000257906000526020600020900160005054815260208101919091526040016000205410155b156102555760018301805482908110156100025760009182526020909120015491505b6001016101a8565b610548600435602435600160a060020a03331660009081526003602052604081205460ff16156100c4578054839010156105e45780548084038101808355908290829080158290116105df576002028160020283600052602060002091820191016105df919061066b565b610548600435600160a060020a03331660009081526005602052604090205460ff16156100c457600160a060020a0381166000908152604090205460ff1615156100f65760406000819020805460ff191660019081179091556004805490910190558051600160a060020a038316815290517f1a4ce6942f7aa91856332e618fc90159f13a340611a308f5d7327ba0707e56859181900360200190a16100f6565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c4576002546001141561071457610002565b61045b600435602435600060006000600050600185038154811015610002579080526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5630181509050806001016000508381548110156100025750825250602090200154919050565b61054a600435600160a060020a03811660009081526003602052604090205460ff165b919050565b61054a60043560036020526000908152604090205460ff1681565b61045b60045481565b6000545b60408051918252519081900360200190f35b61054a600435600160a060020a03811660009081526005602052604090205460ff1661042e565b610548600435600160a060020a03331660009081526003602052604090205460ff16156100c457600160a060020a03811660009081526003602052604090205460ff1615156100f65760406000818120600160a060020a0384169182905260036020908152815460ff1916600190811790925560028054909201909155825191825291517f0ad2eca75347acd5160276fe4b5dad46987e4ff4af9e574195e3e9bc15d7e0ff929181900390910190a16100f6565b005b604080519115158252519081900360200190f35b600160a060020a03811660009081526005602052604090205460ff16156100f65760406000819020805460ff19169055600480546000190190558051600160a060020a038316815290517f8cee3054364d6799f1c8962580ad61273d9d38ca1ff26516bd1ad23c099a60229181900360200190a16100f6565b509392505050565b505050505b60008054600019850190811015610002578382526002027f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563016020819052604082205490925014156106b8578060010160005080548060010182818154818355818115116106a5578183600052602060002091820191016106a5919061068d565b50506002015b808211156106a157600181018054600080835591825260208220610665918101905b808211156106a1576000815560010161068d565b5090565b5050506000928352506020909120018290555b600082815260208281526040918290208054600101905581514381529081018490528151600160a060020a033316927f3d03ba7f4b5227cdb385f2610906e5bcee147171603ec40005b30915ad20e258928290030190a2505050565b600160a060020a03811660009081526003602052604090205460ff16156100f65760406000819020805460ff19169055600280546000190190558051600160a060020a038316815290517f183393fc5cffbfc7d03d623966b85f76b9430f42d3aada2ac3f3deabc78899e89181900360200190a16100f656","storage":{"0x0000000000000000000000000000000000000000000000000000000000000001":"0x02","0x0000000000000000000000000000000000000000000000000000000000000002":"0x04","0x29ecdbdf95c7f6ceec92d6150c697aa14abeb0f8595dd58d808842ea237d8494":"0x01","0x6aa118c6537572d8b515a9f9154be55a3377a8de7991cd23bf6e5ceb368688e3":"0x01","0x50793743212c6f01d326957d7069005b912f8215f10c7536be6b10782c6c44cd":"0x01","0x38f6c908c5cc7ca668cec2f476abe61b4dbb1df20f0ad8e07ef5dbf6a2f1ffd4":"0x01","0x0000000000000000000000000000000000000000000000000000000000000004":"0x02","0xaca3b76ed4968740c3180dd7fa37f4aa229a2c758a848f53920e9ccb4c4bb74e":"0x01","0xd188ba2dc293670542c1befaf7678b0859e5354a0727d1188b2afb6f47fe24d1":"0x01"},"balance":"1000000000000000000000000000"},"f232a4bf183cf17d09bea23e19ceff58ad9dbfed":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"645cab2686477cd244562d4bd95a75f157a4c055":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"a79f57a6884a71a25fd17c21549796a53c067376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f7dce95345c5a5917360571165260cf0e8d98918":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a56b69d34c023dd99e3ee195d41311d047f19b7":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"8e2a9043ae6866a786f8ed175aa87c0ab9a78c65":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"4f1323a0283663ca0c456a2444b2ac52a6a0a208":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}'
        > /eth/genesis.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/static-nodes.json

        echo
        '["enode://4ba08ad6480cff9a1bd68afd860bce7b503c473849710d16bf8684f36347cb8ed0c599f40fd8c7eabb9e04247ce6c9accc13523b26b25ccb8e733ba4b6a3d839@172.16.239.10:21000?discport=0","enode://bfddbfe19b42ba51f3f35d9300e629517018a0e82fa1728c9f1dce04d539bb8e7db31b83d60ee5b31558c7bbdd34b420446a61b8d4235815726d568d26b8ae48@172.16.239.11:21000?discport=0","enode://9530e557787fd29c2e6ca995b29201248fdc06ba1b81a3ec649df88f7175536c42641fa7015db9c4e5bae679e4276fe00d54fcb71770ff7376fd1d12e37533b5@172.16.239.12:21000?discport=0","enode://b03fbba5b7e0a52d34a6051dcd89ff1ff1f1cae802e053528905d91d6c2ee3c2c734e5467c62146db98112ef35bb9171e6e5acfba620f88723d62079f7c90182@172.16.239.13:21000?discport=0","enode://503b7981dd4b6fff3a92108505a8438a83fc0528892aca312c971217ac21e2e0e2cc81293c6e85f3398572aeaed2b41fc9a208e93e3e769ad5cd4922f8441f0b@172.16.239.14:21000?discport=0","enode://76412ff35bc43f647e7495fdd4651d75bedd60f76e5641068cdd94dbbdf7082109e9521abca701bc6ca401b54d620e354656e76a9697cd12d7be77473bdfcb4d@172.16.239.15:21000?discport=0","enode://a6e71825cf8c1d1c88960f925b2bb28bdd17746e61828226ad6a5519674d0980d25ecec296cc1cafe07f83911b268ff77f7791f30d67a9b474385aa7d70742c0@172.16.239.16:21000?discport=0"]'
        > /eth/permissioned-nodes.json

        echo 'password' > ./password

        echo '5c8736fb8a82cf648c7d1cb8b5da2a74f0f2dd127b579421da6c72dd2772c2e7'
        > ./file

        geth account import ./file --datadir /eth --password ./password

        rm ./file && rm ./password

        geth init /eth/genesis.json --datadir /eth

        fi

        geth --rpc --rpcaddr '0.0.0.0' --rpcport '8545' --rpccorsdomain '*'
        --datadir '/eth' --rpcapi
        'db,eth,net,web3,istanbul,personal,admin,debug,txpool' --ws --wsorigins
        '*' --wsport '9000' --wsapi
        'db,eth,net,web3,personal,admin,debug,txpool' --wsaddr '0.0.0.0'
        --networkid 2018 --targetgaslimit 9007199254740000 --permissioned
        --debug --metrics --syncmode 'full' --gasprice 0 --mine --verbosity 3
        --nodiscover --emitcheckpoints --istanbul.blockperiod 1 --mine
        --minerthreads 1 --syncmode full --identity "validator-6" --nodekeyhex
        "5c8736fb8a82cf648c7d1cb8b5da2a74f0f2dd127b579421da6c72dd2772c2e7"
        --etherbase "4f1323a0283663ca0c456a2444b2ac52a6a0a208" --port "21000"
    networks:
      app_net:
        ipv4_address: 172.16.239.16
    restart: always
  constellation-6:
    hostname: constellation-6
    image: 'quorumengineering/constellation:latest'
    ports:
      - '10006:10006'
    volumes:
      - 'constellation-6:/constellation:z'
    entrypoint:
      - /bin/sh
      - '-c'
      - >
        if [ -d "constellation" ]; then

        mkdir -p /constellation

        echo
        "socket=\"/constellation/tm.ipc\"\npublickeys=[\"/constellation/tm.pub\"]\n"
        > /constellation/tm.conf 

        constellation-node --generatekeys=/constellation/tm

        cp /constellation/tm.pub /tmp/tm6.pub

        fi

        constellation-node --socket=/constellation/tm.ipc
        --publickeys=/constellation/tm.pub --privatekeys=/constellation/tm.key
        --storage=/constellation --verbosity=4
        --othernodes=http://172.16.239.100:10000/,http://172.16.239.101:10001/,http://172.16.239.102:10002/
        --url=http://172.16.239.106:10006/ --port=10006
    networks:
      app_net:
        ipv4_address: 172.16.239.106
    restart: always
networks:
  app_net:
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: 172.16.239.0/24
volumes:
  constellation-0: ~
  validator-0: ~
  constellation-1: ~
  validator-1: ~
  constellation-2: ~
  validator-2: ~
  constellation-3: ~
  validator-3: ~
  constellation-4: ~
  validator-4: ~
  constellation-5: ~
  validator-5: ~
  constellation-6: ~
  validator-6: ~
